<div class="filter-view">

	<h1>Spots Filter</h1>

	<p>Last updated at {{ spots.lastUpdate | dateToUTCTime }}</p>
	<p>Showing {{ filteredSpots.length | pluralize:'spot' }} out of {{ spots.spots.length }}</p>


	<div class="row">

		<div class="col-lg-8 col-md-10">

			<table class="table" data-ng-show="spots.spots.length > 0">

				<thead>
					<tr>
						<th class="column-date">Time</th>
						<th class="column-callsign">Callsign</th>
						<th class="column-summit" colspan="2">Summit</th>
						<th class="column-frequency">Frequency</th>
						<th class="column-mode">Mode</th>
						<th>Log</th>
					</tr>
				</thead>

				<tbody data-ng-mouseleave="spots.setHover()">
					<tr data-ng-repeat="spot in filteredSpots = (spots.spots | filterSpots | filter: {hide: '!true'})" 
						data-ng-class="{ success: spot.isNew && spot.match, 'hover-blue': spot.activeHover, 'hover-light-blue': spot.passiveHover, 'hover-red': spot.highlightReject, 'hover-green': spot.highlightMatch }"
						data-ng-mouseover="spots.setHover(spot.index)"
						tooltip-html-unsafe="
							<div class='col-xs-12'><span class='pull-left col-xs-6 '>{{ spot.date }}</span><span class='pull-right col-xs-6'>{{ spot.frequency + ' ' + spot.mode }}</span></div>
							<div class='col-xs-12'><span class='pull-left col-xs-6 '>{{ spot.callsign }}</span><span class='pull-right col-xs-6'>{{ spot.operator }}</span></div>
							<div class='col-xs-12'><span class='pull-left col-xs-6 '>{{ spot.summitReference }}</span><span class='pull-right col-xs-6'>{{ spot.summitName }}</span></div>
							<div class='col-xs-12'><span class='pull-left col-xs-6 '>{{ 'Altitude: ' + spot.altitude }}</span><span class='pull-right col-xs-6'>{{ 'Points: ' + spot.points }}</span></div>
							<div class='col-xs-12 view-split'>
								<div class='col-xs-12'><span class='col-xs-12 '>{{ spot.comment }}</span></div>
								<div class='col-xs-12'><span class='col-xs-12 '>{{ 'Posted by ' + spot.postedBy }}</span></div>
							</div>"
						tooltip-placement="{{tooltipPosition}}">

						<td class="column-date">{{ spot.date }}</td>
						<td class="column-callsign"><a href="http://www.qrz.com/db/?callsign={{ spot.callsign | stripCallsign }}" class="callsign-link" target="blank">{{ spot.callsign }}</a><span class="operator hidden-xs" data-ng-hide="spot.operator === 'Not registered'">( {{ spot.operator }} )</span></td>
						<td class="column-summit"><a href="http://sotawatch.org/summits.php?summit={{ spot.summitReference }}" target="_blank">{{ spot.summitReference }}</a></td>
						<td class="column-points" >
							<span  class="points" data-ng-show="spot.points" data-ng-class="{ red: spot.points > 7, orange: spot.points > 4 && spot.points < 7, green: spot.points < 5 }">
								({{ spot.points }})
							</span>
						</td>
						<td class="column-frequency">{{ spot.frequencyString }}</td>
						<td class="column-mode">{{ spot.mode }}</td>
						<td data-ng-click="logger.add(spot.callsign, spot.summitReference, spot.frequencyString, spot.mode); alert.addAlert('Spot added to the log','info',2000)" title="Click to log !">
							<span class="glyphicon glyphicon-edit"></span>
						</td>
					</tr>
				</tbody>

			</table>

		</div>

	</div>

</div>